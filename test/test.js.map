{"version":3,"sources":["test.es6","test.js"],"names":[],"mappings":"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","file":"test.js","sourcesContent":["'use strict';\n\n/*eslint-env node, mocha */\n\nimport lint from 'mocha-eslint';\nimport * as assert from 'assert';\nimport * as path from 'path';\nimport 'babel-polyfill';\nimport * as Promise from 'bluebird';\nimport * as sigv4 from '../src/index.es6';\nimport * as fsCallback from 'fs';\n\nconst fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\tlint(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n\t * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n\t */\n\tdescribe('Signing AWS Requests', () => {\n\t\tlet signedHeaders = 'content-type;host;x-amz-date';\n\t\tlet requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tlet hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n\t\t * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n\t\t */\n\t\tdescribe('Task 1: Create a Canonical Request', () => {\n\t\t\tit('should match the hashed payload', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.hash(requestPayload),\n\t\t\t\t\t'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2'\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tlet canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' +\n\t\t\t\t'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' +\n\t\t\t\t'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.canonicalRequest(\n\t\t\t\t\t\t'POST',\n\t\t\t\t\t\t'/',\n\t\t\t\t\t\t'',\n\t\t\t\t\t\t'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' +\n\t\t\t\t\t\t\t'-date:20110909T233600Z',\n\t\t\t\t\t\tsignedHeaders,\n\t\t\t\t\t\trequestPayload\n\t\t\t\t\t),\n\t\t\t\t\tcanonicalForm\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.hash(canonicalForm),\n\t\t\t\t\thashedCanonicalRequest\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\n\t\tlet algorithm = 'AWS4-HMAC-SHA256';\n\t\tlet credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tlet stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' +\n\t\t\t'39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n\t\t * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n\t\t */\n\t\tdescribe('Task 2: Create a String to Sign', () => {\n\t\t\tit('should match the sample string to sign', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.stringToSign(\n\t\t\t\t\t\talgorithm,\n\t\t\t\t\t\t'20110909T233600Z',\n\t\t\t\t\t\tcredentialScope,\n\t\t\t\t\t\thashedCanonicalRequest\n\t\t\t\t\t),\n\t\t\t\t\tstringToSign\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\n\t\tlet signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n\t\t * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n\t\t */\n\t\tdescribe('Task 3: Calculate the Signature', () => {\n\t\t\tit('should match the hex signature', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.sign(\n\t\t\t\t\t\t'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY',\n\t\t\t\t\t\t'20110909',\n\t\t\t\t\t\t'us-east-1',\n\t\t\t\t\t\t'iam',\n\t\t\t\t\t\tstringToSign\n\t\t\t\t\t),\n\t\t\t\t\tsignature\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\n\t\t/**\n\t\t * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n\t\t */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', () => {\n\t\t\tlet accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.authorization(\n\t\t\t\t\t\talgorithm,\n\t\t\t\t\t\taccessKeyId,\n\t\t\t\t\t\tcredentialScope,\n\t\t\t\t\t\tsignedHeaders,\n\t\t\t\t\t\tsignature\n\t\t\t\t\t),\n\t\t\t\t\t'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' +\n\t\t\t\t\t\t'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' +\n\t\t\t\t\t\t'deb456c'\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tit('should match the query string', () => {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tsigv4.querystringify(\n\t\t\t\t\t\t'Action=CreateUser&UserName=NewUser&Version=2010-05-08&',\n\t\t\t\t\t\talgorithm,\n\t\t\t\t\t\taccessKeyId,\n\t\t\t\t\t\t'20140611/us-east-1/iam/aws4_request',\n\t\t\t\t\t\t'20140611T231318Z',\n\t\t\t\t\t\t'30',\n\t\t\t\t\t\t'host',\n\t\t\t\t\t\tsignature\n\t\t\t\t\t),\n\t\t\t\t\t'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' +\n\t\t\t\t\t\t'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' +\n\t\t\t\t\t\t'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' +\n\t\t\t\t\t\t'9e98e4b0199114b84c54174deb456c'\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\tlet algorithm = 'AWS4-HMAC-SHA256';\n\tlet accessKeyId = 'AKIDEXAMPLE';\n\tlet requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\tlet credentialScope = '20110909/us-east-1/host/aws4_request';\n\tlet secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\tlet suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t/**\n\t * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n\t */\n\tfs.readdirAsync(suiteDir).then(files => {\n\t\tlet groups = files\n\t\t\t.filter(file => file.slice(-5) === '.sreq')\n\t\t\t.map(file => file.slice(0, -5));\n\n\t\tgroups.forEach(group => {\n\t\t\tdescribe('Test Suite: ' + group, () => {\n\t\t\t\tlet request,\n\t\t\t\t\tcanonicalRequest,\n\t\t\t\t\tstringToSign,\n\t\t\t\t\tauthorizationHeader,\n\t\t\t\t\tsignedRequest;\n\n\t\t\t\tbefore(done => {\n\t\t\t\t\tlet files = [\n\t\t\t\t\t\t'req',   // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq',  // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts',   // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq'   // <file-name>.sreq the signed request.\n\t\t\t\t\t].map(ext => fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8'));\n\n\t\t\t\t\tPromise.settle(files).then(results => {\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\trequest,\n\t\t\t\t\t\t\tcanonicalRequest,\n\t\t\t\t\t\t\tstringToSign,\n\t\t\t\t\t\t\tauthorizationHeader,\n\t\t\t\t\t\t\tsignedRequest\n\t\t\t\t\t\t] = results.map(r => r.value());\n\n\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', () => {\n\t\t\t\t\tit('should match the canonical request', () => {\n\t\t\t\t\t\tassert.strictEqual(\n\t\t\t\t\t\t\tsigv4.requestToCanonicalRequest(request),\n\t\t\t\t\t\t\tcanonicalRequest\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', () => {\n\t\t\t\t\tit('should match the string to sign', () => {\n\t\t\t\t\t\tassert.strictEqual(\n\t\t\t\t\t\t\tsigv4.stringToSign(\n\t\t\t\t\t\t\t\talgorithm,\n\t\t\t\t\t\t\t\trequestDate,\n\t\t\t\t\t\t\t\tcredentialScope,\n\t\t\t\t\t\t\t\tsigv4.hash(canonicalRequest)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tstringToSign\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', () => {\n\t\t\t\t\tit('should match the authorization header value', () => {\n\t\t\t\t\t\tlet signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\tlet signature = sigv4.sign(\n\t\t\t\t\t\t\tsecretAccessKey,\n\t\t\t\t\t\t\trequestDate.slice(0, 8),\n\t\t\t\t\t\t\t'us-east-1',\n\t\t\t\t\t\t\t'host',\n\t\t\t\t\t\t\tstringToSign\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tassert.strictEqual(\n\t\t\t\t\t\t\tsigv4.authorization(\n\t\t\t\t\t\t\t\talgorithm,\n\t\t\t\t\t\t\t\taccessKeyId,\n\t\t\t\t\t\t\t\tcredentialScope,\n\t\t\t\t\t\t\t\tsignedHeaders,\n\t\t\t\t\t\t\t\tsignature\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tauthorizationHeader\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdescribe('The Signed Request', () => {\n\t\t\t\t\tit('should match the signed request value', () => {\n\t\t\t\t\t\tassert.strictEqual(\n\t\t\t\t\t\t\tsigv4.addAuthorization(request, authorizationHeader),\n\t\t\t\t\t\t\tsignedRequest\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n}","'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nrequire('babel-polyfill');\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _index = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_index);\n\nvar _fs = require('fs');\n\nvar fsCallback = _interopRequireWildcard(_fs);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar test = 't1';\n\nvar fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2.default)(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i[\"return\"]) _i[\"return\"]();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t\t}\n\t};\n}();\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nrequire('babel-polyfill');\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _index = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_index);\n\nvar _fs = require('fs');\n\nvar fsCallback = _interopRequireWildcard(_fs);\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj.default = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar test = '';\n\nvar fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2.default)(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i[\"return\"]) _i[\"return\"]();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t\t}\n\t};\n}();\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nrequire('babel-polyfill');\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _index = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_index);\n\nvar _fs = require('fs');\n\nvar fsCallback = _interopRequireWildcard(_fs);\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj.default = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2.default)(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i[\"return\"]) _i[\"return\"]();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t\t}\n\t};\n}();\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nrequire('babel-polyfill');\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _index = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_index);\n\nvar _fs = require('fs');\n\nvar fsCallback = _interopRequireWildcard(_fs);\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj.default = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2.default)(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i[\"return\"]) _i[\"return\"]();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t\t}\n\t};\n}();\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nrequire('babel-polyfill');\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _index = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_index);\n\nvar _fs = require('fs');\n\nvar fsCallback = _interopRequireWildcard(_fs);\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj.default = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar fs = Promise.promisifyAll(fsCallback);\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2.default)(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i['return']) _i['return']();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError('Invalid attempt to destructure non-iterable instance');\n\t\t}\n\t};\n}();\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj['default'] = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { 'default': obj };\n}\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _srcIndexEs6 = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_srcIndexEs6);\n\nvar fs = Promise.promisifyAll(require('fs'));\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2['default'])(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n'use strict';\n\n/*eslint-env node, mocha */\n\nvar _slicedToArray = function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = [];var _n = true;var _d = false;var _e = undefined;try {\n\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t_arr.push(_s.value);if (i && _arr.length === i) break;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true;_e = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i['return']) _i['return']();\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e;\n\t\t\t}\n\t\t}return _arr;\n\t}return function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i);\n\t\t} else {\n\t\t\tthrow new TypeError('Invalid attempt to destructure non-iterable instance');\n\t\t}\n\t};\n}();\n\nfunction _interopRequireWildcard(obj) {\n\tif (obj && obj.__esModule) {\n\t\treturn obj;\n\t} else {\n\t\tvar newObj = {};if (obj != null) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n\t\t\t}\n\t\t}newObj['default'] = obj;return newObj;\n\t}\n}\n\nfunction _interopRequireDefault(obj) {\n\treturn obj && obj.__esModule ? obj : { 'default': obj };\n}\n\nvar _mochaEslint = require('mocha-eslint');\n\nvar _mochaEslint2 = _interopRequireDefault(_mochaEslint);\n\nvar _assert = require('assert');\n\nvar assert = _interopRequireWildcard(_assert);\n\nvar _path = require('path');\n\nvar path = _interopRequireWildcard(_path);\n\nvar _bluebird = require('bluebird');\n\nvar Promise = _interopRequireWildcard(_bluebird);\n\nvar _srcIndexEs6 = require('../src/index.es6');\n\nvar sigv4 = _interopRequireWildcard(_srcIndexEs6);\n\nvar fs = Promise.promisifyAll(require('fs'));\n\n/**\n * Mocha ESLint\n */\n{\n\t(0, _mochaEslint2['default'])(['**/*.es6']);\n}\n\n/**\n * Tests from the AWS Documentation\n */\n{\n\t/**\n  * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n  */\n\tdescribe('Signing AWS Requests', function () {\n\t\tvar signedHeaders = 'content-type;host;x-amz-date';\n\t\tvar requestPayload = 'Action=ListUsers&Version=2010-05-08';\n\t\tvar hashedCanonicalRequest = '3511de7e95d28ecd39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n   */\n\t\tdescribe('Task 1: Create a Canonical Request', function () {\n\t\t\tit('should match the hashed payload', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(requestPayload), 'b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2');\n\t\t\t});\n\n\t\t\tvar canonicalForm = 'POST\\n/\\n\\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.a' + 'mazonaws.com\\nx-amz-date:20110909T233600Z\\n\\ncontent-type;host;x-amz-date\\nb6359072c78d70ebee1e81adc' + 'bab4f01bf2c23245fa365ef83fe8f1f955085e2';\n\n\t\t\tit('should match the sample canonical form', function () {\n\t\t\t\tassert.strictEqual(sigv4.canonicalRequest('POST', '/', '', 'content-type:application/x-www-form-urlencoded; charset=utf-8\\nhost:iam.amazonaws.com\\nx-amz' + '-date:20110909T233600Z', signedHeaders, requestPayload), canonicalForm);\n\t\t\t});\n\n\t\t\tit('should match the sample hashed canonical request', function () {\n\t\t\t\tassert.strictEqual(sigv4.hash(canonicalForm), hashedCanonicalRequest);\n\t\t\t});\n\t\t});\n\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar credentialScope = '20110909/us-east-1/iam/aws4_request';\n\t\tvar stringToSign = 'AWS4-HMAC-SHA256\\n20110909T233600Z\\n20110909/us-east-1/iam/aws4_request\\n3511de7e95d28ecd' + '39e9513b642aee07e54f4941150d8df8bf94b328ef7e55e2';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n   */\n\t\tdescribe('Task 2: Create a String to Sign', function () {\n\t\t\tit('should match the sample string to sign', function () {\n\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, '20110909T233600Z', credentialScope, hashedCanonicalRequest), stringToSign);\n\t\t\t});\n\t\t});\n\n\t\tvar signature = 'ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174deb456c';\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n   */\n\t\tdescribe('Task 3: Calculate the Signature', function () {\n\t\t\tit('should match the hex signature', function () {\n\t\t\t\tassert.strictEqual(sigv4.sign('wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY', '20110909', 'us-east-1', 'iam', stringToSign), signature);\n\t\t\t});\n\t\t});\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n   */\n\t\tdescribe('Task 4: Add the Signing Information to the Request', function () {\n\t\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\n\t\t\tit('should match the authorization', function () {\n\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20110909/us-east-1/iam/aws4_request, SignedHeaders=conte' + 'nt-type;host;x-amz-date, Signature=ced6826de92d2bdeed8f846f0bf508e8559e98e4b0199114b84c54174' + 'deb456c');\n\t\t\t});\n\n\t\t\tit('should match the query string', function () {\n\t\t\t\tassert.strictEqual(sigv4.querystringify('Action=CreateUser&UserName=NewUser&Version=2010-05-08&', algorithm, accessKeyId, '20140611/us-east-1/iam/aws4_request', '20140611T231318Z', '30', 'host', signature), 'Action=CreateUser&UserName=NewUser&Version=2010-05-08&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Cre' + 'dential=AKIDEXAMPLE%2F20140611%2Fus-east-1%2Fiam%2Faws4_request&X-Amz-Date=20140611T231318Z&' + 'X-Amz-Expires=30&X-Amz-SignedHeaders=host&X-Amz-Signature=ced6826de92d2bdeed8f846f0bf508e855' + '9e98e4b0199114b84c54174deb456c');\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * AWS Signature Version 4 Test Suite\n */\n{\n\t(function () {\n\t\tvar algorithm = 'AWS4-HMAC-SHA256';\n\t\tvar accessKeyId = 'AKIDEXAMPLE';\n\t\tvar requestDate = sigv4.formatDateTime(new Date('Mon, 09 Sep 2011 23:36:00 GMT'));\n\t\tvar credentialScope = '20110909/us-east-1/host/aws4_request';\n\t\tvar secretAccessKey = 'wJalrXUtnFEMI/K7MDENG+bPxRfiCYEXAMPLEKEY';\n\t\tvar suiteDir = path.join(__dirname, 'fixtures/aws4_testsuite/');\n\n\t\t/**\n   * Implements https://docs.aws.amazon.com/general/latest/gr/signature-v4-test-suite.html\n   */\n\t\tfs.readdirAsync(suiteDir).then(function (files) {\n\t\t\tvar groups = files.filter(function (file) {\n\t\t\t\treturn file.slice(-5) === '.sreq';\n\t\t\t}).map(function (file) {\n\t\t\t\treturn file.slice(0, -5);\n\t\t\t});\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tdescribe('Test Suite: ' + group, function () {\n\t\t\t\t\tvar request = undefined,\n\t\t\t\t\t    canonicalRequest = undefined,\n\t\t\t\t\t    stringToSign = undefined,\n\t\t\t\t\t    authorizationHeader = undefined,\n\t\t\t\t\t    signedRequest = undefined;\n\n\t\t\t\t\tbefore(function (done) {\n\t\t\t\t\t\tvar files = ['req', // <file-name>.reqthe web request to be signed.\n\t\t\t\t\t\t'creq', // <file-name>.creqthe resulting canonical request.\n\t\t\t\t\t\t'sts', // <file-name>.ststhe resulting string to sign.\n\t\t\t\t\t\t'authz', // <file-name>.authzthe Authorization header.\n\t\t\t\t\t\t'sreq' // <file-name>.sreq the signed request.\n\t\t\t\t\t\t].map(function (ext) {\n\t\t\t\t\t\t\treturn fs.readFileAsync(path.join(suiteDir, group + '.' + ext), 'utf8');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tPromise.settle(files).then(function (results) {\n\t\t\t\t\t\t\tvar _results$map = results.map(function (r) {\n\t\t\t\t\t\t\t\treturn r.value();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar _results$map2 = _slicedToArray(_results$map, 5);\n\n\t\t\t\t\t\t\trequest = _results$map2[0];\n\t\t\t\t\t\t\tcanonicalRequest = _results$map2[1];\n\t\t\t\t\t\t\tstringToSign = _results$map2[2];\n\t\t\t\t\t\t\tauthorizationHeader = _results$map2[3];\n\t\t\t\t\t\t\tsignedRequest = _results$map2[4];\n\n\t\t\t\t\t\t\tcanonicalRequest = canonicalRequest.replace(/\\r/g, '');\n\t\t\t\t\t\t\tstringToSign = stringToSign.replace(/\\r/g, '');\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 1: Create a Canonical Request for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the canonical request', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.requestToCanonicalRequest(request), canonicalRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 2: Create a String to Sign for Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the string to sign', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.stringToSign(algorithm, requestDate, credentialScope, sigv4.hash(canonicalRequest)), stringToSign);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('Task 3: Calculate the AWS Signature Version 4', function () {\n\t\t\t\t\t\tit('should match the authorization header value', function () {\n\t\t\t\t\t\t\tvar signedHeaders = canonicalRequest.split('\\n').slice(-2, -1)[0];\n\t\t\t\t\t\t\tvar signature = sigv4.sign(secretAccessKey, requestDate.slice(0, 8), 'us-east-1', 'host', stringToSign);\n\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.authorization(algorithm, accessKeyId, credentialScope, signedHeaders, signature), authorizationHeader);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdescribe('The Signed Request', function () {\n\t\t\t\t\t\tit('should match the signed request value', function () {\n\t\t\t\t\t\t\tassert.strictEqual(sigv4.addAuthorization(request, authorizationHeader), signedRequest);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t})();\n}\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map\n\n//# sourceMappingURL=test.js.map"]}