{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5d48401a7b12c23eb05d","webpack:///./src/index.js","webpack:///./src/web-deps.js"],"names":["httpRequestMethod","canonicalURI","canonicalQueryString","canonicalHeaders","signedHeaders","requestPayload","emptyHash","join","buildCanonicalRequest","secretAccessKey","date","region","service","reduce","acc","val","preCalculateSigningKey","stringToSign","signingKey","preCalculatedSign","sign","formatDateTime","buildStringToSign","buildAuthorization","hash","algorithm","toISOString","replace","requestDate","credentialScope","hashedCanonicalRequest","accessKeyId","signature","map","item","key","data","encoding","importedKey","subtle","importKey","toBinary","algorithmSign","buffer","toHex","hmac","digest","hashOptions","crypto","window","msCrypto","webkitSubtle","normalize","encodeURI","bytes","Uint8Array","str","i","length","byte","toString","TextEncoder","encode","len","buf","ArrayBuffer","bufView","Uint16Array","charCodeAt","name"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sigv4\"] = factory();\n\telse\n\t\troot[\"sigv4\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d48401a7b12c23eb05d","import {hash, hmac, normalize} from 'deps';\n\nexport {hash};\n\nconst algorithm = 'AWS4-HMAC-SHA256';\nconst emptyHash = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\n\n/**\n * Formats a Date object to an AWS date string\n *\n * @param {!Date} date - The date\n * @returns {string} - The formatted date string\n */\nexport function formatDateTime(date) {\n\treturn date\n\t\t.toISOString()\n\t\t.replace(/-|:|(\\.\\d+)/g, '');\n}\n\n/**\n * Creates the canonical request\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n *\n * @param {!string} httpRequestMethod - The HTTP request method (e.g. `GET` or `POST`)\n * @param {!string} canonicalURI - The canonical URI\n * @param {!string} canonicalQueryString - The canonical query string\n * @param {!string} canonicalHeaders - The canonical headers\n * @param {!string} signedHeaders - The signed headers\n * @param {!string} requestPayload - The payload of the request\n * @returns {Promise<string>} - The canonical request\n */\nexport async function buildCanonicalRequest(httpRequestMethod, canonicalURI, canonicalQueryString, canonicalHeaders,\n                                            signedHeaders, requestPayload='') {\n\treturn [\n\t\thttpRequestMethod,\n\t\tcanonicalURI,\n\t\tcanonicalQueryString,\n\t\tcanonicalHeaders,\n\t\t'',\n\t\tsignedHeaders,\n\t\tawait (requestPayload ? hash(requestPayload) : emptyHash)\n\t].join('\\n');\n}\n\n/**\n * Creates the string to sign\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n *\n * @param {!string} requestDate - The request date (`YYYMMDDThhmmssZ`)\n * @param {!string} credentialScope - the credential scope (formatted as `YYYYMMDD/region/service/aws4_request`)\n * @param {!string} hashedCanonicalRequest\n * @returns {string} - The string to sign\n */\nexport function buildStringToSign(requestDate, credentialScope, hashedCanonicalRequest) {\n\treturn [\n\t\talgorithm,\n\t\trequestDate,\n\t\tcredentialScope,\n\t\thashedCanonicalRequest\n\t].join('\\n');\n}\n\n/**\n * Pre-calculates the signing key\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} secretAccessKey - The secret access key for the AWS account\n * @param {!string} date - The date in YYYYMMDD format\n * @param {!string} region - The AWS region (e.g. `us-east-1`)\n * @param {!string} service - The AWS service (e.g. `iam`)\n * @returns {Promise<string>} - The pre-calculated signing key\n */\nexport async function preCalculateSigningKey(secretAccessKey, date, region, service) {\n\treturn [\n\t\tdate,\n\t\tregion,\n\t\tservice,\n\t\t'aws4_request'\n\t].reduce(\n\t\tasync (acc, val) => hmac(await acc, val),\n\t\t`AWS4${secretAccessKey}`\n\t);\n}\n\n/**\n * Pre-calculates the signature\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} signingKey - The pre-calculated signing key\n * @param {!string} stringToSign - The string to sign\n * @returns {Promise<string>} - The pre-calculated signature\n */\nexport function preCalculatedSign(signingKey, stringToSign) {\n\treturn hmac(signingKey, stringToSign, 'hex');\n}\n\n/**\n * Calculates the signature\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} secretAccessKey - The secret access key for the AWS account\n * @param {!string} date - The date in YYYYMMDD format\n * @param {!string} region - The AWS region (e.g. `us-east-1`)\n * @param {!string} service - The AWS service (e.g. `iam`)\n * @param {!string} stringToSign - The string to sign\n * @returns {Promise<string>} - The signature\n */\nexport async function sign(secretAccessKey, date, region, service, stringToSign) {\n\tconst signingKey = await preCalculateSigningKey(secretAccessKey, date, region, service);\n\n\treturn preCalculatedSign(signingKey, stringToSign);\n}\n\n/**\n * Creates the authorization string\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n *\n * @param {!string} accessKeyId\n * @param {!string} credentialScope\n * @param {!string} signedHeaders\n * @param {!string} signature\n * @returns {string}\n */\nexport function buildAuthorization(accessKeyId, credentialScope, signedHeaders, signature) {\n\treturn algorithm + ' ' + [\n\t\t['Credential', `${accessKeyId}/${credentialScope}`],\n\t\t['SignedHeaders', signedHeaders],\n\t\t['Signature', signature]\n\t]\n\t\t.map(item => item.join('='))\n\t\t.join(', ');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const crypto = window.crypto || window.msCrypto;\nconst subtle = crypto.subtle || crypto.webkitSubtle;\nconst algorithm = 'sha-256';\n\nexport const normalize = encodeURI;\n\nfunction toHex(buffer) {\n\tconst bytes = new Uint8Array(buffer);\n\n\tlet str = '';\n\n\tfor (let i = 0; i < bytes.length; ++i) {\n\t\tconst byte = bytes[i].toString(16);\n\t\tstr += `${byte.length < 2 ? '0' : ''}${byte}`;\n\t}\n\n\treturn str;\n}\n\nconst toBinary = ('TextEncoder' in window) ?\n\t(str => (new TextEncoder()).encode(str)) :\n\t(str => {\n\t\tconst len = str.length;\n\t\tconst buf = new ArrayBuffer(len * 2);\n\t\tconst bufView = new Uint16Array(buf);\n\n\t\tfor (let i = 0; i < len; i++)\n\t\t\tbufView[i] = str.charCodeAt(i);\n\n\t\treturn buf;\n\t});\n\nconst hashOptions = {\n\tname: algorithm\n};\n\nconst algorithmSign = {\n\tname: 'HMAC',\n\thash: hashOptions\n};\n\n/**\n * Computes the HMAC\n *\n * @param {!string|ArrayBuffer} key - The key\n * @param {!string} data - The data to hash\n * @param {?string} encoding - The encoding type (hex)\n * @returns {string|ArrayBuffer} - The output HMAC\n */\nexport async function hmac(key, data, encoding) {\n\tconst importedKey = await subtle.importKey(\n\t\t'raw',\n\t\ttypeof key === 'string' ? toBinary(key) : key,\n\t\talgorithmSign,\n\t\tfalse,\n\t\t['sign']\n\t);\n\n\tconst buffer = await subtle.sign(\n\t\talgorithmSign,\n\t\timportedKey,\n\t\ttoBinary(data)\n\t);\n\n\treturn encoding === 'hex' ? toHex(buffer) : buffer;\n}\n\n/**\n * Computes the hash\n *\n * @param {!string} data - The data to hash\n * @returns {string} - The hashed output\n */\nexport async function hash(data) {\n\treturn toHex(\n\t\tawait subtle.digest(\n\t\t\thashOptions,\n\t\t\ttoBinary(data)\n\t\t)\n\t);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web-deps.js"],"sourceRoot":""}