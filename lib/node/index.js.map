{"version":3,"sources":["webpack:///webpack/bootstrap 429ac1456873e7139ac9","webpack:///./src/index.js","webpack:///./src/node-deps.js","webpack:///external \"crypto\"","webpack:///external \"path\""],"names":["formatDateTime","buildCanonicalRequest","buildStringToSign","preCalculateSigningKey","preCalculatedSign","sign","buildAuthorization","hash","algorithm","emptyHash","date","toISOString","replace","requestPayload","Promise","resolve","then","httpRequestMethod","canonicalURI","canonicalQueryString","canonicalHeaders","signedHeaders","hashedRequestPayload","join","requestDate","credentialScope","hashedCanonicalRequest","region","service","secretAccessKey","steps","promises","signingKey","data","stringToSign","accessKeyId","signature","map","item","normalize","hmac","key","update","digest","encoding"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 429ac1456873e7139ac9","import {hash, hmac, normalize} from 'deps';\n\nexport {hash};\n\nconst algorithm = 'AWS4-HMAC-SHA256';\nconst emptyHash = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\n\n/**\n * Formats a Date object to an AWS date string\n *\n * @param {!Date} date - The date\n * @returns {string} - The formatted date string\n */\nexport function formatDateTime(date) {\n\treturn date\n\t\t.toISOString()\n\t\t.replace(/-|:|(\\.\\d+)/g, '');\n}\n\n/**\n * Creates the canonical request\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n *\n * @param {!string} httpRequestMethod - The HTTP request method (e.g. `GET` or `POST`)\n * @param {!string} canonicalURI - The canonical URI\n * @param {!string} canonicalQueryString - The canonical query string\n * @param {!string} canonicalHeaders - The canonical headers\n * @param {!string} signedHeaders - The signed headers\n * @param {!string} requestPayload - The payload of the request\n * @returns {Promise<string>} - The canonical request\n */\nexport function buildCanonicalRequest(httpRequestMethod, canonicalURI, canonicalQueryString, canonicalHeaders, signedHeaders,\n                                 requestPayload='') {\n\treturn (requestPayload ? hash(requestPayload) : Promise.resolve(emptyHash))\n\t\t.then(hashedRequestPayload => [\n\t\t\thttpRequestMethod,\n\t\t\tcanonicalURI,\n\t\t\tcanonicalQueryString,\n\t\t\tcanonicalHeaders,\n\t\t\t'',\n\t\t\tsignedHeaders,\n\t\t\thashedRequestPayload\n\t\t].join('\\n'));\n}\n\n/**\n * Creates the string to sign\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n *\n * @param {!string} requestDate - The request date (`YYYMMDDThhmmssZ`)\n * @param {!string} credentialScope - the credential scope (formatted as `YYYYMMDD/region/service/aws4_request`)\n * @param {!string} hashedCanonicalRequest\n * @returns {string} - The string to sign\n */\nexport function buildStringToSign(requestDate, credentialScope, hashedCanonicalRequest) {\n\treturn [\n\t\talgorithm,\n\t\trequestDate,\n\t\tcredentialScope,\n\t\thashedCanonicalRequest\n\t].join('\\n');\n}\n\n/**\n * Pre-calculates the signing key\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} secretAccessKey - The secret access key for the AWS account\n * @param {!string} date - The date in YYYYMMDD format\n * @param {!string} region - The AWS region (e.g. `us-east-1`)\n * @param {!string} service - The AWS service (e.g. `iam`)\n * @returns {Promise<string>} - The pre-calculated signing key\n */\nexport function preCalculateSigningKey(secretAccessKey, date, region, service) {\n\tconst steps = [\n\t\tdate,\n\t\tregion,\n\t\tservice,\n\t\t'aws4_request'\n\t];\n\n\tlet promises = Promise.resolve(`AWS4${secretAccessKey}`);\n\n\tfor (const data of steps)\n\t\tpromises = promises.then(signingKey => hmac(signingKey, data));\n\n\treturn promises;\n}\n\n/**\n * Pre-calculates the signature\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} signingKey - The pre-calculated signing key\n * @param {!string} stringToSign - The string to sign\n * @returns {Promise<string>} - The pre-calculated signature\n */\nexport function preCalculatedSign(signingKey, stringToSign) {\n\treturn hmac(signingKey, stringToSign, 'hex');\n}\n\n/**\n * Calculates the signature\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param {!string} secretAccessKey - The secret access key for the AWS account\n * @param {!string} date - The date in YYYYMMDD format\n * @param {!string} region - The AWS region (e.g. `us-east-1`)\n * @param {!string} service - The AWS service (e.g. `iam`)\n * @param {!string} stringToSign - The string to sign\n * @returns {Promise<string>} - The signature\n */\nexport function sign(secretAccessKey, date, region, service, stringToSign) {\n\treturn preCalculateSigningKey(secretAccessKey, date, region, service)\n\t\t.then(signingKey => preCalculatedSign(signingKey, stringToSign));\n}\n\n/**\n * Creates the authorization string\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n *\n * @param {!string} accessKeyId\n * @param {!string} credentialScope\n * @param {!string} signedHeaders\n * @param {!string} signature\n * @returns {string}\n */\nexport function buildAuthorization(accessKeyId, credentialScope, signedHeaders, signature) {\n\treturn algorithm + ' ' + [\n\t\t['Credential', `${accessKeyId}/${credentialScope}`],\n\t\t['SignedHeaders', signedHeaders],\n\t\t['Signature', signature]\n\t]\n\t\t.map(item => item.join('='))\n\t\t.join(', ');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {normalize} from 'path';\nimport {createHmac, createHash} from 'crypto';\nconst algorithm = 'sha256';\n\nexport {normalize} from 'path';\n\n/**\n * Computes the HMAC\n *\n * @param {!string} key - The key\n * @param {!string} data - The data to hash\n * @param {?string} [encoding=binary] - The encoding type (hex|binary)\n * @returns {Promise<string|buffer>} - The output HMAC\n */\nexport function hmac(key, data, encoding='binary') {\n\treturn Promise.resolve(\n\t\tcreateHmac(algorithm, key)\n\t\t\t.update(data)\n\t\t\t.digest(encoding)\n\t);\n}\n\n/**\n * Computes the hash\n *\n * @param {!string} data - The data to hash\n * @returns {Promise<string>} - The hashed output\n */\nexport function hash(data) {\n\treturn Promise.resolve(\n\t\tcreateHash(algorithm)\n\t\t\t.update(data)\n\t\t\t.digest('hex')\n\t);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/node-deps.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}